[gd_scene load_steps=7 format=2]

[ext_resource path="res://WorldData.tscn" type="PackedScene" id=1]
[ext_resource path="res://GameWorld/UI/Camera.gd" type="Script" id=2]
[ext_resource path="res://GameWorld/GameWorld.tres" type="Environment" id=3]
[ext_resource path="res://GameWorld/Terrain/Terrain.tscn" type="PackedScene" id=4]
[ext_resource path="res://GameWorld/UI/Selection.tscn" type="PackedScene" id=5]




[sub_resource type="GDScript" id=1]

script/source = "extends Spatial

var Cell = preload(\"res://GameWorld/Terrain/Cell.gd\")

onready var world_data = get_parent().get_node(\"WorldData\")
onready var light = get_node(\"SpotLight\")

export(float,1.0,10.0) var light_height = 3.0
export(Color) var light_color = null
export(Material) var material = null
export(Vector3) var offset = Vector3()

var cell = null

func _ready():
	cell = Cell.new(world_data, material)
	cell.translation = offset
	add_child(cell)
	light.translation.y = light_height + world_data.get_terrain_mesh_height(self.translation)
	if light_color:
		light.light_color = light_color

func update_shape():
	cell.update_shape()"

[node name="GameWorld" type="Spatial"]

script = SubResource( 1 )
light_height = 3.0
light_color = null
material = null
offset = Vector3( 0, 0, 0 )

[node name="WorldData" parent="." index="0" instance=ExtResource( 1 )]

noises_scales = PoolRealArray( 0.006, 0.023, 0.164, 0.41, 0.26, 0.53 )
gravel_height = 0.61

[node name="Camera" type="Camera" parent="." index="1"]

transform = Transform( 1, 0, 0, 0, 0.736169, 0.676797, 0, -0.676797, 0.736169, 0, 3, 3.18431 )
keep_aspect = 1
cull_mask = 1048575
environment = null
h_offset = 0.0
v_offset = 0.0
doppler_tracking = 0
projection = 0
current = false
fov = 75.0
size = 1.0
near = 0.05
far = 100.0
script = ExtResource( 2 )
_sections_unfolded = [ "Transform" ]
target_position = Vector3( 0, 0, 0 )
camera_offset = Vector3( 0, 5, 10 )
camera_height = 5.0
camera_vspeed = 1.0
camera_hspeed = 1.0
camera_y_angle = 0.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="." index="2"]

environment = ExtResource( 3 )
_sections_unfolded = [ "Pause" ]

[node name="DirectionalLight" type="DirectionalLight" parent="." index="3"]

transform = Transform( -0.458478, -0.669656, 0.584258, 0, 0.657426, 0.753519, -0.888706, 0.345472, -0.301416, 0, 7.74309, 0 )
layers = 1
light_color = Color( 1, 1, 1, 1 )
light_energy = 1.0
light_indirect_energy = 1.0
light_negative = false
light_specular = 0.5
light_bake_mode = 2
light_cull_mask = -1
shadow_enabled = false
shadow_color = Color( 0, 0, 0, 1 )
shadow_bias = 0.1
shadow_contact = 0.0
shadow_reverse_cull_face = false
editor_only = false
directional_shadow_mode = 2
directional_shadow_split_1 = 0.1
directional_shadow_split_2 = 0.2
directional_shadow_split_3 = 0.5
directional_shadow_blend_splits = false
directional_shadow_normal_bias = 0.8
directional_shadow_bias_split_scale = 0.25
directional_shadow_depth_range = 0
directional_shadow_max_distance = 200.0
_sections_unfolded = [ "Light", "Shadow" ]

[node name="Terrain" parent="." index="4" instance=ExtResource( 4 )]

script = SubResource( 1 )
light_height = 3.0
light_color = null
material = null
offset = Vector3( 0, 0, 0 )

[node name="Hover" parent="." index="5" instance=ExtResource( 5 )]


